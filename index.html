<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>MOUSE AI | IPTV SYSTEM</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { background: #02040a; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .video-container { width: 80%; margin: auto; border: 2px solid #00d2ff; border-radius: 10px; overflow: hidden; background: #000; }
        video { width: 100%; aspect-ratio: 16/9; }
        button { padding: 15px 30px; background: #00d2ff; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-bottom: 20px; }
        .info { margin-top: 10px; color: #8b949e; }
    </style>
</head>
<body>
    <h1>نظام MOUSE AI للبث</h1>
    <button onclick="playStream()">تشغيل البث الآن</button>
    
    <div class="video-container">
        <video id="player" controls autoplay></video>
    </div>
    
    <div class="info" id="status">جاهز للبدء..</div>

    <script>
        // بياناتك التي تعمل على VLC
        const CONFIG = {
            host: "http://live.stablechannels.tv:80",
            user: "nfsthbbx",
            pass: "vFf8aZ2n92",
            channelId: "12345" // استبدل هذا برقم قناة حقيقي من ملفك
        };

        function playStream() {
            const video = document.getElementById('player');
            const status = document.getElementById('status');
            
            // بناء الرابط الأصلي (الذي يعمل في VLC)
            const originalUrl = `${CONFIG.host}/live/${CONFIG.user}/${CONFIG.pass}/${CONFIG.channelId}.ts`;
            
            // تمريره عبر البروكسي (ليعمل في المتصفح)
            const proxiedUrl = `/api/proxy?url=${encodeURIComponent(originalUrl)}`;

            status.textContent = "جاري الاتصال عبر البروكسي...";

            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(proxiedUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    video.play();
                    status.textContent = "البث يعمل بنجاح ✅";
                });
            } else {
                video.src = proxiedUrl;
                video.play();
            }
        }
    </script>
</body>
</html>
